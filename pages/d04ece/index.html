<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>服务路由 | DESIGN</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/design/img/favicon.ico">
    <meta name="description" content="Design 是个人的架构设计心得">
    <meta name="keywords" content="vuepress,theme,blog,vdoing">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/design/assets/css/0.styles.672d2015.css" as="style"><link rel="preload" href="/design/assets/js/app.cb97202e.js" as="script"><link rel="preload" href="/design/assets/js/2.fa058597.js" as="script"><link rel="preload" href="/design/assets/js/34.242c9c33.js" as="script"><link rel="prefetch" href="/design/assets/js/10.fbbc33f8.js"><link rel="prefetch" href="/design/assets/js/11.e3d7ecd4.js"><link rel="prefetch" href="/design/assets/js/12.6de50559.js"><link rel="prefetch" href="/design/assets/js/13.8dedab1e.js"><link rel="prefetch" href="/design/assets/js/14.ead62617.js"><link rel="prefetch" href="/design/assets/js/15.377f9eff.js"><link rel="prefetch" href="/design/assets/js/16.763bd371.js"><link rel="prefetch" href="/design/assets/js/17.452907d0.js"><link rel="prefetch" href="/design/assets/js/18.bfb4eb4c.js"><link rel="prefetch" href="/design/assets/js/19.3a381546.js"><link rel="prefetch" href="/design/assets/js/20.a58c8d54.js"><link rel="prefetch" href="/design/assets/js/21.2396ac9a.js"><link rel="prefetch" href="/design/assets/js/22.bb98ebd0.js"><link rel="prefetch" href="/design/assets/js/23.b7fdba34.js"><link rel="prefetch" href="/design/assets/js/24.0b80133a.js"><link rel="prefetch" href="/design/assets/js/25.69b28bfb.js"><link rel="prefetch" href="/design/assets/js/26.bf4988d2.js"><link rel="prefetch" href="/design/assets/js/27.0b6c643d.js"><link rel="prefetch" href="/design/assets/js/28.f2a75d7c.js"><link rel="prefetch" href="/design/assets/js/29.de74b523.js"><link rel="prefetch" href="/design/assets/js/3.4b71d9fe.js"><link rel="prefetch" href="/design/assets/js/30.a3285463.js"><link rel="prefetch" href="/design/assets/js/31.bee37403.js"><link rel="prefetch" href="/design/assets/js/32.4c4ce223.js"><link rel="prefetch" href="/design/assets/js/33.2b15780c.js"><link rel="prefetch" href="/design/assets/js/35.65867b33.js"><link rel="prefetch" href="/design/assets/js/36.aa83c10f.js"><link rel="prefetch" href="/design/assets/js/37.21526183.js"><link rel="prefetch" href="/design/assets/js/38.27a51a78.js"><link rel="prefetch" href="/design/assets/js/39.d49a2493.js"><link rel="prefetch" href="/design/assets/js/4.3836de01.js"><link rel="prefetch" href="/design/assets/js/40.6a058e64.js"><link rel="prefetch" href="/design/assets/js/41.406875cc.js"><link rel="prefetch" href="/design/assets/js/42.bbdd8e3f.js"><link rel="prefetch" href="/design/assets/js/43.d40b65fe.js"><link rel="prefetch" href="/design/assets/js/44.c0f90ae5.js"><link rel="prefetch" href="/design/assets/js/45.888d6df5.js"><link rel="prefetch" href="/design/assets/js/46.f7e33e57.js"><link rel="prefetch" href="/design/assets/js/47.45f53f88.js"><link rel="prefetch" href="/design/assets/js/48.77efa4d7.js"><link rel="prefetch" href="/design/assets/js/49.222129ad.js"><link rel="prefetch" href="/design/assets/js/5.f79f1e82.js"><link rel="prefetch" href="/design/assets/js/50.5f2dae6e.js"><link rel="prefetch" href="/design/assets/js/51.54d77935.js"><link rel="prefetch" href="/design/assets/js/52.935ac9e4.js"><link rel="prefetch" href="/design/assets/js/53.0561a5cf.js"><link rel="prefetch" href="/design/assets/js/54.b64090af.js"><link rel="prefetch" href="/design/assets/js/55.e720956e.js"><link rel="prefetch" href="/design/assets/js/56.05ceed8c.js"><link rel="prefetch" href="/design/assets/js/57.b43f5784.js"><link rel="prefetch" href="/design/assets/js/58.1ccee6f6.js"><link rel="prefetch" href="/design/assets/js/59.11da92d7.js"><link rel="prefetch" href="/design/assets/js/6.ceb8656c.js"><link rel="prefetch" href="/design/assets/js/60.72015a1a.js"><link rel="prefetch" href="/design/assets/js/61.3aacd878.js"><link rel="prefetch" href="/design/assets/js/62.693f7f4a.js"><link rel="prefetch" href="/design/assets/js/63.f666517a.js"><link rel="prefetch" href="/design/assets/js/64.456d56a4.js"><link rel="prefetch" href="/design/assets/js/65.5af02db9.js"><link rel="prefetch" href="/design/assets/js/66.dd0db447.js"><link rel="prefetch" href="/design/assets/js/67.0670b2ab.js"><link rel="prefetch" href="/design/assets/js/68.09d5204c.js"><link rel="prefetch" href="/design/assets/js/69.db09bda6.js"><link rel="prefetch" href="/design/assets/js/7.25301cde.js"><link rel="prefetch" href="/design/assets/js/70.ce9ceff6.js"><link rel="prefetch" href="/design/assets/js/71.df171820.js"><link rel="prefetch" href="/design/assets/js/72.cd125ee6.js"><link rel="prefetch" href="/design/assets/js/73.e033fc1b.js"><link rel="prefetch" href="/design/assets/js/74.5160e9b2.js"><link rel="prefetch" href="/design/assets/js/75.495ec91d.js"><link rel="prefetch" href="/design/assets/js/76.8121dc30.js"><link rel="prefetch" href="/design/assets/js/77.405ab201.js"><link rel="prefetch" href="/design/assets/js/78.091cc5a6.js"><link rel="prefetch" href="/design/assets/js/79.8fcedf93.js"><link rel="prefetch" href="/design/assets/js/8.613325ef.js"><link rel="prefetch" href="/design/assets/js/80.65ec1411.js"><link rel="prefetch" href="/design/assets/js/81.1151b577.js"><link rel="prefetch" href="/design/assets/js/82.1064cbc3.js"><link rel="prefetch" href="/design/assets/js/83.d6b435b9.js"><link rel="prefetch" href="/design/assets/js/84.d40835b6.js"><link rel="prefetch" href="/design/assets/js/85.bbb92aeb.js"><link rel="prefetch" href="/design/assets/js/86.4b654a58.js"><link rel="prefetch" href="/design/assets/js/87.49f96070.js"><link rel="prefetch" href="/design/assets/js/88.1cd4bf4b.js"><link rel="prefetch" href="/design/assets/js/89.6f0cf925.js"><link rel="prefetch" href="/design/assets/js/9.31c9a510.js"><link rel="prefetch" href="/design/assets/js/90.fdf245ed.js"><link rel="prefetch" href="/design/assets/js/91.596c04cb.js"><link rel="prefetch" href="/design/assets/js/92.1656dd04.js"><link rel="prefetch" href="/design/assets/js/93.08106ce8.js"><link rel="prefetch" href="/design/assets/js/94.00f357bc.js"><link rel="prefetch" href="/design/assets/js/95.54112709.js"><link rel="prefetch" href="/design/assets/js/96.aed60490.js">
    <link rel="stylesheet" href="/design/assets/css/0.styles.672d2015.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/design/" class="home-link router-link-active"><img src="https://raw.githubusercontent.com/dunwu/images/dev/common/dunwu-logo.png" alt="DESIGN" class="logo"> <span class="site-name can-hide">DESIGN</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/design/01.架构/" class="nav-link">架构</a></div><div class="nav-item"><a href="/design/02.分布式/" class="nav-link">分布式</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计" class="dropdown-title"><a href="/design/03.设计/" class="link-title">设计</a> <span class="title" style="display:none;">设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design/03.设计/01.UML/" class="nav-link">UML</a></li><li class="dropdown-item"><!----> <a href="/design/03.设计/02.设计模式/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/design/03.设计/03.重构/" class="nav-link">重构</a></li></ul></div></div> <a href="https://github.com/dunwu/design" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/design/01.架构/" class="nav-link">架构</a></div><div class="nav-item"><a href="/design/02.分布式/" class="nav-link">分布式</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="设计" class="dropdown-title"><a href="/design/03.设计/" class="link-title">设计</a> <span class="title" style="display:none;">设计</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design/03.设计/01.UML/" class="nav-link">UML</a></li><li class="dropdown-item"><!----> <a href="/design/03.设计/02.设计模式/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/design/03.设计/03.重构/" class="nav-link">重构</a></li></ul></div></div> <a href="https://github.com/dunwu/design" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>分布式综合</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design/pages/cd56bb/" class="sidebar-link">分布式面试总结</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>分布式理论</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design/pages/367308/" class="sidebar-link">分布式理论</a></li><li><a href="/design/pages/874539/" class="sidebar-link">深入剖析共识性算法 Paxos</a></li><li><a href="/design/pages/e40812/" class="sidebar-link">深入剖析共识性算法 Raft</a></li><li><a href="/design/pages/d15993/" class="sidebar-link">分布式算法 Gossip</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>分布式关键技术</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>流量调度</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design/pages/282676/" class="sidebar-link">流量控制</a></li><li><a href="/design/pages/b7ca44/" class="sidebar-link">深入浅出负载均衡</a></li><li><a href="/design/pages/d04ece/" aria-current="page" class="active sidebar-link">服务路由</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/design/pages/d04ece/#_1-服务路由简介" class="sidebar-link">1. 服务路由简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/design/pages/d04ece/#_1-1-什么是服务路由" class="sidebar-link">1.1. 什么是服务路由</a></li><li class="sidebar-sub-header level3"><a href="/design/pages/d04ece/#_1-2-为什么需要服务路由" class="sidebar-link">1.2. 为什么需要服务路由</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/design/pages/d04ece/#_2-服务路由的规则" class="sidebar-link">2. 服务路由的规则</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/design/pages/d04ece/#_2-1-条件路由" class="sidebar-link">2.1. 条件路由</a></li><li class="sidebar-sub-header level3"><a href="/design/pages/d04ece/#_2-2-脚本路由" class="sidebar-link">2.2. 脚本路由</a></li><li class="sidebar-sub-header level3"><a href="/design/pages/d04ece/#_2-3-标签路由" class="sidebar-link">2.3. 标签路由</a></li><li class="sidebar-sub-header level3"><a href="/design/pages/d04ece/#_2-4-路由规则获取方式" class="sidebar-link">2.4. 路由规则获取方式</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/design/pages/d04ece/#_3-参考资料" class="sidebar-link">3. 参考资料</a></li></ul></li><li><a href="/design/pages/3e66c2/" class="sidebar-link">分布式会话基本原理</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>数据调度</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design/pages/471208/" class="sidebar-link">缓存基本原理</a></li><li><a href="/design/pages/7da6ca/" class="sidebar-link">读写分离基本原理</a></li><li><a href="/design/pages/103382/" class="sidebar-link">分库分表基本原理</a></li><li><a href="/design/pages/0b2e59/" class="sidebar-link">分布式 ID 基本原理</a></li><li><a href="/design/pages/910bad/" class="sidebar-link">分布式事务基本原理</a></li><li><a href="/design/pages/69360c/" class="sidebar-link">分布式锁基本原理</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>通信</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design/pages/4bba35/" class="sidebar-link">消息队列基本原理</a></li></ul></section></li><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading"><span>服务治理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design/pages/516f3b/" class="sidebar-link">服务注册和发现</a></li><li><a href="/design/pages/4c0174/" class="sidebar-link">服务监控</a></li><li><a href="/design/pages/f918df/" class="sidebar-link">服务链路监控</a></li><li><a href="/design/pages/28bda8/" class="sidebar-link">服务容错</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>分布式应用</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group is-sub-group depth-1"><p class="sidebar-heading open"><span>微服务</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/design/pages/f13c06/" class="sidebar-link">微服务简介</a></li><li><a href="/design/pages/ebf86b/" class="sidebar-link">RPC 基本原理</a></li><li><a href="/design/pages/3c87eb/" class="sidebar-link">kong</a></li></ul></section></li></ul></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-1baff76c><div class="articleInfo" data-v-1baff76c><ul class="breadcrumbs" data-v-1baff76c><li data-v-1baff76c><a href="/design/" title="首页" class="iconfont icon-home router-link-active" data-v-1baff76c></a></li> <li data-v-1baff76c><a href="/design/categories/?category=%E5%88%86%E5%B8%83%E5%BC%8F" title="分类" data-v-1baff76c>分布式</a></li><li data-v-1baff76c><a href="/design/categories/?category=%E5%88%86%E5%B8%83%E5%BC%8F%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF" title="分类" data-v-1baff76c>分布式关键技术</a></li><li data-v-1baff76c><a href="/design/categories/?category=%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6" title="分类" data-v-1baff76c>流量调度</a></li></ul> <div class="info" data-v-1baff76c><div title="作者" class="author iconfont icon-touxiang" data-v-1baff76c><a href="https://github.com/dunwu" target="_blank" title="作者" class="beLink" data-v-1baff76c>dunwu</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-1baff76c><a href="javascript:;" data-v-1baff76c>2022-04-19</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">服务路由<!----></h1>  <div class="theme-vdoing-content content__default"><h1 id="服务路由"><a href="#服务路由" class="header-anchor">#</a> 服务路由</h1> <h2 id="_1-服务路由简介"><a href="#_1-服务路由简介" class="header-anchor">#</a> 1. 服务路由简介</h2> <h3 id="_1-1-什么是服务路由"><a href="#_1-1-什么是服务路由" class="header-anchor">#</a> 1.1. 什么是服务路由</h3> <p>服务消费者在发起服务调用时，如果面对多个服务提供者，需要通过一定的规则来选择调用哪个服务提供者，这就是<strong>服务路由</strong>。</p> <h3 id="_1-2-为什么需要服务路由"><a href="#_1-2-为什么需要服务路由" class="header-anchor">#</a> 1.2. 为什么需要服务路由</h3> <p>负载均衡的作用和服务路由的功能看上去很近似，二者有什么区别呢？</p> <p>负载均衡的目标是提供服务分发而不是解决路由问题，常见的静态、动态负载均衡算法也无法实现精细化的路由管理，但是负载均衡也可以简单看做是路由方案的一种。</p> <p>服务路由通常用于以下场景，目的在于实现流量隔离：</p> <ul><li><strong>分组调用</strong>：一般来讲，为了保证服务的高可用性，实现异地多活的需求，一个服务往往不止部署在一个数据中心，而且出于节省成本等考虑，有些业务可能不仅在私有机房部署，还会采用公有云部署，甚至采用多家公有云部署。服务节点也会按照不同的数据中心分成不同的分组，这时对于服务消费者来说，选择哪一个分组调用，就必须有相应的路由规则。</li> <li><strong>蓝绿发布</strong>：蓝绿发布场景中，一共有两套服务群组：一套是提供旧版功能的服务群组，标记为<strong>绿色</strong>；另一套是提供新版功能的服务群组，标记为<strong>蓝色</strong>。两套服务群组都是功能完善的，并且正在运行的系统，只是服务版本和访问流量不同。新版群组（蓝色）通常是为了做内部测试、验收，不对外部用户暴露。
<ul><li>如果新版群组（蓝色）运行稳定，并测试、验收通过后，则通过服务路由、负载均衡等手段逐步将外部用户流量导向新版群组（蓝色）。</li> <li>如果新版群组（蓝色）运行不稳定，或测试、验收不通过，则排查、解决问题后，再继续测试、验收。</li></ul></li> <li><strong>灰度发布</strong>：灰度发布（又名金丝雀发布）是指在黑与白之间，能够平滑过渡的一种发布方式。在其上可以进行 A/B 测试，即让一部分用户使用特性 A，一部分用户使用特性 B：如果用户对 B 没有什么反对意见，那么逐步扩大发布范围，直到把所有用户都迁移到 B 上面来。灰度发布可以保证整体系统的稳定，在初始灰度的时候就可以发现、调整问题，以保证其影响度。要支持灰度发布，就要求服务能够根据一定的规则，将流量隔离。</li> <li><strong>流量切换</strong>：在业务线上运行过程中，经常会遇到一些不可抗力因素导致业务故障，比如某个机房的光缆被挖断，或者发生着火等事故导致整个机房的服务都不可用。这个时候就需要按照某个指令，能够把原来调用这个机房服务的流量切换到其他正常的机房。</li> <li><strong>线下测试联调</strong>：线下测试时，可能会缺少相应环境。可以将测试应用注册到线上，然后开启路由规则，在本地进行测试。</li> <li><strong>读写分离</strong>。对于大多数互联网业务来说都是读多写少，所以在进行服务部署的时候，可以把读写分开部署，所有写接口可以部署在一起，而读接口部署在另外的节点上。</li></ul> <h2 id="_2-服务路由的规则"><a href="#_2-服务路由的规则" class="header-anchor">#</a> 2. 服务路由的规则</h2> <p>服务路由主要有两种规则：一种是条件路由，一种是脚本路由。</p> <h3 id="_2-1-条件路由"><a href="#_2-1-条件路由" class="header-anchor">#</a> 2.1. 条件路由</h3> <p><strong>条件路由是基于条件表达式的路由规则</strong>。各个 RPC 框架的条件路由表达式各不相同。</p> <p>我们不妨参考一下 Dubbo 的条件路由。Dubbo 的条件路由有两种配置粒度，如下：</p> <ul><li><p><strong>应用粒度</strong></p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># app1的消费者只能消费所有端口为20880的服务实例</span>
<span class="token comment"># app2的消费者只能消费所有端口为20881的服务实例</span>
<span class="token punctuation">---</span>
<span class="token key atrule">scope</span><span class="token punctuation">:</span> application
<span class="token key atrule">force</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">runtime</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">key</span><span class="token punctuation">:</span> governance<span class="token punctuation">-</span>conditionrouter<span class="token punctuation">-</span>consumer
<span class="token key atrule">conditions</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> application=app1 =<span class="token punctuation">&gt;</span> address=<span class="token important">*:</span><span class="token number">20880</span>
  <span class="token punctuation">-</span> application=app2 =<span class="token punctuation">&gt;</span> address=<span class="token important">*:</span><span class="token number">20881</span>
</code></pre></div></li> <li><p><strong>服务粒度</strong></p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># DemoService的sayHello方法只能消费所有端口为20880的服务实例</span>
<span class="token comment"># DemoService的sayHi方法只能消费所有端口为20881的服务实例</span>
<span class="token punctuation">---</span>
<span class="token key atrule">scope</span><span class="token punctuation">:</span> service
<span class="token key atrule">force</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">runtime</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token key atrule">key</span><span class="token punctuation">:</span> org.apache.dubbo.samples.governance.api.DemoService
<span class="token key atrule">conditions</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> method=sayHello =<span class="token punctuation">&gt;</span> address=<span class="token important">*:</span><span class="token number">20880</span>
  <span class="token punctuation">-</span> method=sayHi =<span class="token punctuation">&gt;</span> address=<span class="token important">*:</span><span class="token number">20881</span>
</code></pre></div></li></ul> <blockquote><p>其中，<code>conditions</code> 定义具体的路由规则内容。<code>conditions</code> 部分是规则的主体，由 1 到任意多条规则组成。详见：<a href="https://dubbo.apache.org/zh/docs/v2.7/user/examples/routing-rule/" target="_blank" rel="noopener noreferrer">Dubbo 路由规则<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>Dubbo 的条件路由规则由两个条件组成，分别用于对服务消费者和提供者进行匹配。条件路由规则的格式如下：</p> <div class="language- extra-class"><pre class="language-text"><code>[服务消费者匹配条件] =&gt; [服务提供者匹配条件]
</code></pre></div><ul><li>服务消费者匹配条件：所有参数和消费者的 URL 进行对比，当消费者满足匹配条件时，对该消费者执行后面的过滤规则。</li> <li>服务提供者匹配条件：所有参数和提供者的 URL 进行对比，消费者最终只拿到过滤后的地址列表。</li></ul> <p><code>condition://</code> 代表了这是一段用条件表达式编写的路由规则，下面是一个条件路由规则示例：</p> <div class="language- extra-class"><pre class="language-text"><code>host = 10.20.153.10 =&gt; host = 10.20.153.11
</code></pre></div><p>该条规则表示 IP 为 <code>10.20.153.10</code> 的服务消费者<strong>只可</strong>调用 IP 为 <code>10.20.153.11</code> 机器上的服务，不可调用其他机器上的服务。</p> <p>下面列举一些 Dubbo 条件路由的典型应用场景：</p> <ul><li>如果服务消费者的匹配条件为空，就表示<strong>所有的服务消费者都可以访问</strong>，就像下面的表达式一样。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>=&gt; host != 10.20.153.11
</code></pre></div><ul><li>如果服务提供者的过滤条件为空，就表示<strong>禁止所有的服务消费者访问</strong>，就像下面的表达式一样。</li></ul> <div class="language- extra-class"><pre class="language-text"><code>host = 10.20.153.10 =&gt;
</code></pre></div><ul><li><strong>排除某个服务节点</strong></li></ul> <div class="language- extra-class"><pre class="language-text"><code>=&gt; host != 172.22.3.91
</code></pre></div><ul><li><strong>白名单</strong></li></ul> <div class="language-fallback extra-class"><pre class="language-text"><code>register.ip != 10.20.153.10,10.20.153.11 =&gt;
</code></pre></div><ul><li><strong>黑名单</strong></li></ul> <div class="language- extra-class"><pre class="language-text"><code>register.ip = 10.20.153.10,10.20.153.11 =&gt;
</code></pre></div><ul><li><strong>只暴露部分机器节点</strong></li></ul> <div class="language- extra-class"><pre class="language-text"><code>=&gt; host = 172.22.3.1*,172.22.3.2*
</code></pre></div><ul><li><strong>为重要应用提供额外的机器节点</strong></li></ul> <div class="language- extra-class"><pre class="language-text"><code>application != kylin =&gt; host != 172.22.3.95,172.22.3.96
</code></pre></div><ul><li><strong>读写分离</strong></li></ul> <div class="language- extra-class"><pre class="language-text"><code>method = find*,list*,get*,is* =&gt; host = 172.22.3.94,172.22.3.95,172.22.3.96
method != find*,list*,get*,is* =&gt; host = 172.22.3.97,172.22.3.98
</code></pre></div><ul><li><strong>前后台分离</strong></li></ul> <div class="language- extra-class"><pre class="language-text"><code>application = bops =&gt; host = 172.22.3.91,172.22.3.92,172.22.3.93
application != bops =&gt; host = 172.22.3.94,172.22.3.95,172.22.3.96
</code></pre></div><ul><li><strong>隔离不同机房网段</strong></li></ul> <div class="language- extra-class"><pre class="language-text"><code>host != 172.22.3.* =&gt; host != 172.22.3.*
</code></pre></div><ul><li>提供者与消费者部署在同集群内，<strong>本机只访问本机的服务</strong></li></ul> <div class="language- extra-class"><pre class="language-text"><code>=&gt; host = $host
</code></pre></div><h3 id="_2-2-脚本路由"><a href="#_2-2-脚本路由" class="header-anchor">#</a> 2.2. 脚本路由</h3> <p>脚本路由是基于脚本语言的路由规则，常用的脚本语言比如 JavaScript、Groovy、JRuby 等。</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;script://0.0.0.0/com.foo.BarService?category=routers&amp;dynamic=false&amp;rule=&quot; + URL.encode(&quot;（function route(invokers) { ... } (invokers)）&quot;)
</code></pre></div><p>这里面 <code>script://</code> 就代表了这是一段脚本语言编写的路由规则，具体规则定义在脚本语言的 route 方法实现里，比如下面这段用 JavaScript 编写的 route() 方法表达的意思是，只有 IP 为 <code>10.20.153.10</code> 的服务消费者可以发起服务调用。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">route</span><span class="token punctuation">(</span><span class="token parameter">invokers</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>ArrayList</span><span class="token punctuation">(</span>invokers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> invokers<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token string">&quot;10.20.153.10&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>invokers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
       result<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>invokers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
 <span class="token punctuation">}</span> <span class="token punctuation">(</span>invokers<span class="token punctuation">)</span>）<span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-3-标签路由"><a href="#_2-3-标签路由" class="header-anchor">#</a> 2.3. 标签路由</h3> <p>标签路由通过将某一个或多个服务的提供者划分到同一个分组，约束流量只在指定分组中流转，从而实现流量隔离的目的，可以作为蓝绿发布、灰度发布等场景的能力基础。</p> <p>标签主要是指对服务提供者的分组，目前有两种方式可以完成实例分组，分别是<strong>动态规则打标</strong>和<strong>静态规则打标</strong>。一般，动态规则优先级比静态规则更高，当两种规则同时存在且出现冲突时，将以动态规则为准。</p> <p>以 Dubbo 的标签路由用法为例</p> <p>（1）<strong>动态规则打标</strong>，可随时在<strong>服务治理控制台</strong>下发标签归组规则</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token comment"># governance-tagrouter-provider应用增加了两个标签分组tag1和tag2</span>
<span class="token comment"># tag1包含一个实例 127.0.0.1:20880</span>
<span class="token comment"># tag2包含一个实例 127.0.0.1:20881</span>
<span class="token punctuation">---</span>
  <span class="token key atrule">force</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">runtime</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">key</span><span class="token punctuation">:</span> governance<span class="token punctuation">-</span>tagrouter<span class="token punctuation">-</span>provider
  <span class="token key atrule">tags</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> tag1
      <span class="token key atrule">addresses</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;127.0.0.1:20880&quot;</span><span class="token punctuation">]</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> tag2
      <span class="token key atrule">addresses</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;127.0.0.1:20881&quot;</span><span class="token punctuation">]</span>
 <span class="token punctuation">...</span>
</code></pre></div><p>（2）<strong>静态规则打标</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>provider</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tag1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>or</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dubbo:</span>service</span> <span class="token attr-name">tag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tag1<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>or</p> <div class="language-fallback extra-class"><pre class="language-text"><code>java -jar xxx-provider.jar -Ddubbo.provider.tag={the tag you want, may come from OS ENV}
</code></pre></div><p>（3）<strong>服务消费者指定标签路由</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">RpcContext</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAttachment</span><span class="token punctuation">(</span><span class="token class-name">Constants</span><span class="token punctuation">.</span>REQUEST_TAG_KEY<span class="token punctuation">,</span><span class="token string">&quot;tag1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>请求标签的作用域为每一次 invocation，使用 <code>attachment</code> 来传递请求标签，注意保存在 <code>attachment</code> 中的值将会在一次完整的远程调用中持续传递，得益于这样的特性，我们只需要在起始调用时，通过一行代码的设置，达到标签的持续传递。</p> <h3 id="_2-4-路由规则获取方式"><a href="#_2-4-路由规则获取方式" class="header-anchor">#</a> 2.4. 路由规则获取方式</h3> <p>路由规则的获取方式主要有三种：</p> <ul><li><strong>本地静态配置</strong>：顾名思义就是路由规则存储在服务消费者本地上。服务消费者发起调用时，从本地固定位置读取路由规则，然后按照路由规则选取一个服务节点发起调用。</li> <li><strong>配置中心管理</strong>：这种方式下，所有的服务消费者都从配置中心获取路由规则，由配置中心来统一管理。</li> <li><strong>注册中心动态下发</strong>：这种方式下，一般是运维人员或者开发人员，通过服务治理平台修改路由规则，服务治理平台调用配置中心接口，把修改后的路由规则持久化到配置中心。因为服务消费者订阅了路由规则的变更，于是就会从配置中心获取最新的路由规则，按照最新的路由规则来执行。</li></ul> <p>一般来讲，<strong>服务路由最好是存储在配置中心</strong>，由配置中心来统一管理。这样的话，所有的服务消费者就不需要在本地管理服务路由，因为大部分的服务消费者并不关心服务路由的问题，或者说也不需要去了解其中的细节。通过配置中心，统一给各个服务消费者下发统一的服务路由，节省了沟通和管理成本。</p> <p>但也不排除某些服务消费者有特定的需求，需要定制自己的路由规则，这个时候就适合通过本地配置来定制。</p> <p>而动态下发可以理解为一种高级功能，它能够动态地修改路由规则，在某些业务场景下十分有用。比如某个数据中心存在问题，需要把调用这个数据中心的服务消费者都切换到其他数据中心，这时就可以通过动态下发的方式，向配置中心下发一条路由规则，将所有调用这个数据中心的请求都迁移到别的地方。</p> <h2 id="_3-参考资料"><a href="#_3-参考资料" class="header-anchor">#</a> 3. 参考资料</h2> <ul><li><a href="https://time.geekbang.org/column/intro/100014401" target="_blank" rel="noopener noreferrer">从 0 开始学微服务<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://time.geekbang.org/column/intro/100046201" target="_blank" rel="noopener noreferrer">RPC 实战与核心原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://time.geekbang.org/course/intro/100003901" target="_blank" rel="noopener noreferrer">微服务架构核心 20 讲<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <div class="page-slot page-slot-bottom">
  <div class="wwads-cn wwads-horizontal pageB" data-id="136" style="width:100%;max-height:80px;min-height:auto;"></div>
  <style>
    .pageB img{width:80px!important;}
    .wwads-horizontal .wwads-text, .wwads-content .wwads-text{line-height:1;}
  </style>
  </div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/design/edit/master/docs/02.分布式/03.分布式关键技术/01.流量调度/03.服务路由.md" target="_blank" rel="noopener noreferrer">📝 帮助改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/design/tags/?tag=%E5%88%86%E5%B8%83%E5%BC%8F" title="标签">#分布式</a><a href="/design/tags/?tag=%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86" title="标签">#服务治理</a><a href="/design/tags/?tag=%E6%B5%81%E9%87%8F%E8%B0%83%E5%BA%A6" title="标签">#流量调度</a><a href="/design/tags/?tag=%E8%B7%AF%E7%94%B1" title="标签">#路由</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2022/04/22, 20:07:55</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/design/pages/b7ca44/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">深入浅出负载均衡</div></a> <a href="/design/pages/3e66c2/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">分布式会话基本原理</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/design/pages/b7ca44/" class="prev">深入浅出负载均衡</a></span> <span class="next"><a href="/design/pages/3e66c2/">分布式会话基本原理</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/design/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/design/pages/28bda8/"><div>
            服务容错
            <!----></div></a> <span class="date">04-20</span></dt></dl><dl><dd>02</dd> <dt><a href="/design/pages/f918df/"><div>
            服务链路监控
            <!----></div></a> <span class="date">04-20</span></dt></dl><dl><dd>03</dd> <dt><a href="/design/pages/4c0174/"><div>
            服务监控
            <!----></div></a> <span class="date">04-19</span></dt></dl> <dl><dd></dd> <dt><a href="/design/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:forbreak@163.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/dunwu" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2019-2022
    <span>钝悟（dunwu） | CC-BY-SA-4.0</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><span class="close-but">×</span> <div>
    <div class="wwads-cn wwads-vertical windowRB" data-id="136" style="max-width:160px;
    min-width: auto;min-height:auto;"></div>
    <style>
      .windowRB{ padding: 0;}
      .windowRB .wwads-img{margin-top: 10px;}
      .windowRB .wwads-content{margin: 0 10px 10px 10px;}
      .custom-html-window-rb .close-but{
        display: none;
      }
    </style>
  </div></div></div></div><div class="global-ui"></div></div>
    <script src="/design/assets/js/app.cb97202e.js" defer></script><script src="/design/assets/js/2.fa058597.js" defer></script><script src="/design/assets/js/34.242c9c33.js" defer></script>
  </body>
</html>
